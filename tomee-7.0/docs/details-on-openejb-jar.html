<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Apache TomEE</title>
	<meta name="description"
		  content="Apache TomEE is a lightweight, yet powerful, JavaEE Application server with feature rich tooling." />
	<meta name="keywords" content="tomee,asf,apache,javaee,jee,shade,embedded,test,junit,applicationcomposer,maven,arquillian" />
	<meta name="author" content="Luka Cvetinovic for Codrops" />
	<link rel="icon" href="../../favicon.ico">
	<link rel="icon"  type="image/png" href="../../favicon.png">
	<meta name="msapplication-TileColor" content="#80287a">
	<meta name="theme-color" content="#80287a">
	<link rel="stylesheet" type="text/css" href="../../css/normalize.css">
	<link rel="stylesheet" type="text/css" href="../../css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="../../css/owl.css">
	<link rel="stylesheet" type="text/css" href="../../css/animate.css">
	<link rel="stylesheet" type="text/css" href="../../fonts/font-awesome-4.1.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="../../fonts/eleganticons/et-icons.css">
	<link rel="stylesheet" type="text/css" href="../../css/jqtree.css">
	<link rel="stylesheet" type="text/css" href="../../css/idea.css">
	<link rel="stylesheet" type="text/css" href="../../css/cardio.css">

	<script type="text/javascript">
		<!-- Matomo -->
		var _paq = window._paq = window._paq || [];
		/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
		/* We explicitly disable cookie tracking to avoid privacy issues */
		_paq.push(['disableCookies']);
		_paq.push(['trackPageView']);
		_paq.push(['enableLinkTracking']);
		(function () {
			var u = "//matomo.privacy.apache.org/";
			_paq.push(['setTrackerUrl', u + 'matomo.php']);
			_paq.push(['setSiteId', '5']);
			var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
			g.async = true;
			g.src = u + 'matomo.js';
			s.parentNode.insertBefore(g, s);
		})();
		<!-- End Matomo Code -->
    </script>
</head>

<body>
    <div class="preloader">
		<img src="../../img/loader.gif" alt="Preloader image">
	</div>
	    <nav class="navbar">
		<div class="container">
		  <div class="row">          <div class="col-md-12">

			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="/" title="Apache TomEE">
				    <span>

				    
                        <img 
							src="../../img/apache_tomee-logo.svg"
							onerror="this.src='../../img/apache_tomee-logo.jpg'"
							height="50"
							>
                    

                    </span>
                </a>
			</div>
			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav navbar-right main-nav">
					<li><a href="../../docs.html">Documentation</a></li>
					<li><a href="../../community/index.html">Community</a></li>
					<li><a href="../../security/security.html">Security</a></li>
					<li><a class="btn btn-accent accent-orange no-shadow" href="../../download.html">Downloads</a></li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		   </div></div>
		</div>
		<!-- /.container-fluid -->
	</nav>


    <div id="main-block" class="container main-block">
        <div class="row title">
          <div class="col-md-12">
            <div class='page-header'>
              
              <h1>Details on openejb-jar</h1>
            </div>
          </div>
        </div>
        <div class="row">
            
            <div class="col-md-12">
                <h1 id="_what_is_an_openejb_jar_xml" class="sect0">What is an openejb-jar.xml?</h1>
<div class="paragraph">
<p>This is the file created by the Deploy Tool that maps your bean&#8217;s
deployment descriptor (ejb-jar.xml) to actual containers and resources
declared in your OpenEJB configuration (openejb.conf). In fact, the
Deploy tool really does nothing more than create this file and put it in
your jar, that&#8217;s it.</p>
</div>
<h1 id="_when_is_the_openejb_jar_xml_used" class="sect0">When is the openejb-jar.xml used?</h1>
<div class="paragraph">
<p>At startup, any jar containing a openejb-jar.xml is loaded by the
container system. The configuration tools will go looking in all the
directories and jars you have declared in your openejb.conf with the
element. For every jar file it finds, it will look inside for an
openejb-jar.xml. If it finds one, it will attempt to load and deploy it
into the container system.</p>
</div>
<h1 id="_do_i_even_need_the_deploy_tool_then" class="sect0">Do I even need the deploy tool then?</h1>
<div class="paragraph">
<p>Nope. Typically you would only use the deploy tool to create your
openejb-jar.xml, then just keep your openejb-jar.xml in your CVS (or
other repository). If you learn how to maintain this openejb-jar.xml
file, you&#8217;ll never need the deploy tool again! You can do all your
builds and deploys automatically.</p>
</div>
<h1 id="_where_do_i_put_the_openejb_jar_xml_in_my_jar" class="sect0">Where do I put the openejb-jar.xml in my jar?</h1>
<div class="paragraph">
<p>The openejb-jar.xml file just goes in the META-INF directory of your jar
next to the ejb-jar.xml file.</p>
</div>
<h1 id="_is_the_file_format_easy" class="sect0">Is the file format easy?</h1>
<div class="paragraph">
<p>If you can understand the ejb-jar.xml, the openejb-jar.xml should be a
breeze.</p>
</div>
<div class="paragraph">
<p>This is the openejb-jar.xml that is created by the Deploy tool in the
Hello World example. As you can see, the file format is extremely
simple.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0"?&gt;
&lt;openejb-jar xmlns="http://www.openejb.org/openejb-jar/1.1"&gt;
    &lt;ejb-deployment  ejb-name="Hello"
         deployment-id="Hello"
         container-id="Default Stateless Container"/&gt;
&lt;/openejb-jar&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>ejb-name</em> attribute is the name you gave the bean in your
ejb-jar.xml. The <em>deployment-id</em> is the name you want to use to lookup
the bean in your client&#8217;s JNDI namespace. The <em>container-id</em> is the name
of the container in your openejb.conf file that you would like the bean
to run in. There MUST be one <em>ejb-deployment</em> element for each EJB in
your jar.</p>
</div>
<div class="sect1">
<h2 id="_what_if_my_bean_uses_a_jdbc_datasource">What if my bean uses a JDBC datasource?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Then you simply add a element to your element like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0"?&gt;
&lt;openejb-jar xmlns="http://www.openejb.org/openejb-jar/1.1"&gt;

    &lt;ejb-deployment  ejb-name="Hello"
             deployment-id="Hello"
             container-id="Default Stateless Container" &gt;

    &lt;resource-link res-ref-name="jdbc/basic/entityDatabase"
             res-id="Default JDBC Database"/&gt;

    &lt;/ejb-deployment&gt;

&lt;/openejb-jar&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>res-ref-name</em> attribute refers to the element of the bean&#8217;s
declaration in the ejb-jar.xml. The <em>res-id</em> attribute refers to the id
of the declared in your openejb.conf that will handle the connections
and provide access to the desired resource.</p>
</div>
</div>
</div>
<h1 id="_how_many_resource_link_elements_will_i_need" class="sect0">How many resource-link elements will I need?</h1>
<div class="paragraph">
<p>You will need one element for every element in your ejb-jar.xml. So if
you had an ejb-jar.xml like the following</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0"?&gt;
&lt;ejb-jar&gt;
  &lt;enterprise-beans&gt;
    &lt;session&gt;
      &lt;ejb-name&gt;MyExampleBean&lt;/ejb-name&gt;
      &lt;home&gt;com.widget.ExampleHome&lt;/home&gt;
      &lt;remote&gt;com.widget.ExampleObject&lt;/remote&gt;
      &lt;ejb-class&gt;com.widget.ExampleBean&lt;/ejb-class&gt;
      &lt;session-type&gt;Stateless&lt;/session-type&gt;
      &lt;transaction-type&gt;Container&lt;/transaction-type&gt;

      &lt;resource-ref&gt;
        &lt;description&gt;
          This is a reference to a JDBC database.
        &lt;/description&gt;
        &lt;res-ref-name&gt;jdbc/myFirstDatabase&lt;/res-ref-name&gt;
        &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;
        &lt;res-auth&gt;Container&lt;/res-auth&gt;
      &lt;/resource-ref&gt;

      &lt;resource-ref&gt;
        &lt;description&gt;
          This is another reference to a JDBC database.
        &lt;/description&gt;
        &lt;res-ref-name&gt;jdbc/anotherDatabase&lt;/res-ref-name&gt;
        &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;
        &lt;res-auth&gt;Container&lt;/res-auth&gt;
      &lt;/resource-ref&gt;

    &lt;/session&gt;
  &lt;/enterprise-beans&gt;
&lt;/ejb-jar&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you would need two elements for that bean in your openejb-jar.xml
file as such.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0"?&gt;
&lt;openejb-jar xmlns="http://www.openejb.org/openejb-jar/1.1"&gt;

    &lt;ejb-deployment  ejb-name="MyExampleBean"
             deployment-id="MyExampleBean"
             container-id="Default Stateless Container" &gt;

    &lt;resource-link res-ref-name="jdbc/myFirstDatabase"
             res-id="My Oracle JDBC Database"/&gt;

    &lt;resource-link res-ref-name="jdbc/anotherDatabase"
             res-id="My PostgreSQL JDBC Database"/&gt;

    &lt;/ejb-deployment&gt;

&lt;/openejb-jar&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This would require two declarations in your openejb.conf, one with the
<em>id</em> attribute set to <em>"My Oracle JDBC Database"</em> , and another with
it&#8217;s <em>id</em> attribute set to <em>"My PostgreSQL JDBC Database"</em></p>
</div>
            </div>
            
        </div>
    </div>
<div style="margin-bottom: 30px;"></div>
<footer>
		<div class="container">
			<div class="row">
				<div class="col-sm-6 text-center-mobile">
					<h3 class="white">Be simple.  Be certified. Be Tomcat.</h3>
					<h5 class="light regular light-white">"A good application in a good server"</h5>
					<ul class="social-footer">
						<li><a href="https://www.facebook.com/ApacheTomEE/"><i class="fa fa-facebook"></i></a></li>
						<li><a href="https://twitter.com/apachetomee"><i class="fa fa-twitter"></i></a></li>
					</ul>
					<h5 class="light regular light-white">
						<a href="../../privacy-policy.html" class="white">Privacy Policy</a>
					</h5>
				</div>
				<div class="col-sm-6 text-center-mobile">
					<div class="row opening-hours">
						<div class="col-sm-3 text-center-mobile">
							<h5><a href="../../latest/docs/" class="white">Documentation</a></h5>
							<ul class="list-unstyled">
								<li><a href="../../latest/docs/admin/configuration/index.html" class="regular light-white">How to configure</a></li>
								<li><a href="../../latest/docs/admin/file-layout.html" class="regular light-white">Dir. Structure</a></li>
								<li><a href="../../latest/docs/developer/testing/index.html" class="regular light-white">Testing</a></li>
								<li><a href="../../latest/docs/admin/cluster/index.html" class="regular light-white">Clustering</a></li>
							</ul>
						</div>
						<div class="col-sm-3 text-center-mobile">
							<h5><a href="../../latest/examples/" class="white">Examples</a></h5>
							<ul class="list-unstyled">
								<li><a href="../../latest/examples/simple-cdi-interceptor.html" class="regular light-white">CDI Interceptor</a></li>
								<li><a href="../../latest/examples/rest-cdi.html" class="regular light-white">REST with CDI</a></li>
								<li><a href="../../latest/examples/ejb-examples.html" class="regular light-white">EJB</a></li>
								<li><a href="../../latest/examples/jsf-managedBean-and-ejb.html" class="regular light-white">JSF</a></li>
							</ul>
						</div>
						<div class="col-sm-3 text-center-mobile">
							<h5><a href="../../community/index.html" class="white">Community</a></h5>
							<ul class="list-unstyled">
								<li><a href="../../community/contributors.html" class="regular light-white">Contributors</a></li>
								<li><a href="../../community/social.html" class="regular light-white">Social</a></li>
								<li><a href="../../community/sources.html" class="regular light-white">Sources</a></li>
							</ul>
						</div>
						<div class="col-sm-3 text-center-mobile">
							<h5><a href="../../security/index.html" class="white">Security</a></h5>
							<ul class="list-unstyled">
								<li><a href="https://apache.org/security" target="_blank" class="regular light-white">Apache Security</a></li>
								<li><a href="https://apache.org/security/projects.html" target="_blank" class="regular light-white">Security Projects</a></li>
								<li><a href="https://cve.mitre.org" target="_blank" class="regular light-white">CVE</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div class="row bottom-footer text-center-mobile">
				<div class="col-sm-12 light-white">
					<p>Copyright &copy; 1999-2022 The Apache Software Foundation, Licensed under the Apache License, Version 2.0. Apache TomEE, TomEE, Apache, the Apache feather logo, and the Apache TomEE project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.</p>
				</div>
			</div>
		</div>
	</footer>
	<!-- Holder for mobile navigation -->
	<div class="mobile-nav">
        <ul>
          <li><a hef="../../latest/docs/admin/index.html">Administrators</a>
          <li><a hef="../../latest/docs/developer/index.html">Developers</a>
          <li><a hef="../../latest/docs/advanced/index.html">Advanced</a>
          <li><a hef="../../community/index.html">Community</a>
        </ul>
		<a href="#" class="close-link"><i class="arrow_up"></i></a>
	</div>
	<!-- Scripts -->
	<script src="../../js/jquery-1.11.1.min.js"></script>
	<script src="../../js/owl.carousel.min.js"></script>
	<script src="../../js/bootstrap.min.js"></script>
	<script src="../../js/wow.min.js"></script>
	<script src="../../js/typewriter.js"></script>
	<script src="../../js/jquery.onepagenav.js"></script>
	<script src="../../js/tree.jquery.js"></script>
	<script src="../../js/highlight.pack.js"></script>
    <script src="../../js/main.js"></script>
		</body>

</html>

